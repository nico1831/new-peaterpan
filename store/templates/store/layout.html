{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <title>{% block title %}PeaterPan{% endblock %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- <link rel="stylesheet" href="{% static 'store/styles.css' %}"> -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=BBH+Sans+Hegarty&display=swap" rel="stylesheet">

        <style>
            body{
                font-family: "BBH Sans Hegarty", sans-serif;
                font-weight: 0;
                font-style: light;
                background-color: #282828;
                margin: 0;
                padding: 0;
                box-sizing: border-box;
                }

                nav {
                    background-color: #92af39;
                    padding: 2px 30px;
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.1);

                    position: fixed; /* Fix to viewport */
                    top: 0;          /* Stick to top */
                    left: 0;         /* Align left */
                    width: 100%;     /* Full width */

                    z-index: 1000;   /* Ensure above other content */
                }

                .logo{
                height: 35px; 
                width: auto; 
                }

                .menu-btn {
                font-size: 30px;
                background: none;
                border: none;
                color: white;
                cursor: pointer;
                margin-right: 50px;
                }

                .menu-icon {
                height: 7vh; 
                width: auto; 
                }

                .sidebar {
                position: fixed;
                top: 0;
                right: -250px;  /* Hide sidebar out of viewport by default */
                width: 250px;
                height: 100%;
                background-color: #333;
                padding: 20px;
                box-sizing: border-box;
                transition: right 0.3s ease;
                color: white;
                z-index: 1002;
                }

                .sidebar.active {
                right: 0; /* Slide sidebar in */
                }

                .close-btn {
                font-size: 30px;
                background: none;
                border: none;
                color: white;
                cursor: pointer;
                float: right;
                margin-bottom: 20px;
                }

                .sidebar ul {
                list-style: none;
                padding: 0;
                text-decoration: underline;
                text-decoration-thickness: 2px; /* optional: control thickness of underline */
                text-underline-offset: 4px; /* optional: space between text and underline */
                }

                .sidebar ul li {
                margin-bottom: 12px;
                }

                .sidebar ul li a {
                color: white;
                text-decoration: none;
                font-weight: bold;
                }
        </style>
    </head>
    <body>

        <nav>
            {% if request.user.profile.user_type == 'buyer' %}
                <a href="{% url 'store:show_products_list' %}">
                    <img src="{% static 'logo.png' %}" alt="Site Logo" class="logo"/>
                </a>
            {% elif request.user.profile.user_type == 'seller' %}
                <a href="{% url 'store:show_products_of_seller' id=request.user.profile.id %}">
                    <img src="{% static 'logo.png' %}" alt="Site Logo" class="logo"/>
                </a>
            {% else %}
                <a href="{% url 'store:show_products_list' %}">
                    <img src="{% static 'logo.png' %}" alt="Site Logo" class="logo"/>
                </a>
            {% endif %}
          
            <button id="menu-btn" class="menu-btn" aria-label="Open menu">
                <img src="{% static 'menu-icon.png' %}" alt="â˜°" class="menu-icon"/>
            </button>
        </nav>

        {% if request.user.profile.user_type == 'buyer' %}
        <!-- Sidebar content -->
        <div id="sidebar" class="sidebar">
        <button id="close-btn" class="close-btn" aria-label="Close menu">&times;</button>
        <ul>
            <li><a href="{% url 'store:show_cart' %}">My Transactions</a></li>
            <li><a href="{% url 'logout' %}">Logout</a></li> 
        </ul>
        </div>
        {% elif request.user.profile.user_type == 'seller' %}
                <div id="sidebar" class="sidebar">
        <button id="close-btn" class="close-btn" aria-label="Close menu">&times;</button>
        <ul>
            <li><a href="{% url 'store:show_transactions' %}">My Transactions</a></li>
            <li><a href="{% url 'store:add_product' %}">Add Product</a></li>
            <li><a href="{% url 'logout' %}">Logout</a></li> 
        </ul>
        </div>
        {% endif %}

        <div class="content-div">
            {% block body %}{% endblock %}
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const menuBtn = document.getElementById("menu-btn");
                const sidebar = document.getElementById("sidebar");
                const closeBtn = document.getElementById("close-btn");

                menuBtn.addEventListener("click", function () {
                sidebar.classList.add("active");
                });

                closeBtn.addEventListener("click", function () {
                sidebar.classList.remove("active");
                });
            });
        </script>

    </body>
</html>